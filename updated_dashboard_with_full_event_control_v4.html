<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Basic School Dashboard</title>
<link crossorigin="anonymous" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&amp;display=swap" rel="stylesheet"/>
<style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Inter', sans-serif;
      background-color: #f0f2f5;
      color: #333;
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    body.dark-mode {
      background-color: #1e1e2f;
      color: #eee;
    }

    a {
      color: #1940cd;
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    .sidebar {
      width: 240px;
      height: 100vh;
      background-color: #1940cd;
      color: white;
      position: fixed;
      padding: 20px;
      box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
    }

    .sidebar h2 {
      margin-top: 10px;
      font-size: 1.4rem;
    }

    .sidebar ul {
      margin-top: 30px;
    }

    .sidebar ul li {
      margin: 15px 0;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 0.95rem;
    }

    .main {
      margin-left: 260px;
      padding: 20px;
    }

    .topbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background-color: #1940cd;
      padding: 12px 24px;
      border-radius: 8px;
      color: white;
      font-size: 0.95rem;
      font-weight: 600;
    }

    .dark-toggle {
      cursor: pointer;
      background: white;
      color: #0b122b;
      padding: 5px 10px;
      border-radius: 4px;
      font-size: 0.85rem;
    }

    .widgets {
      display: flex;
      gap: 20px;
      margin-top: 20px;
      flex-wrap: wrap;
    }

    .widget {
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.06);
      flex: 1 1 200px;
      min-width: 200px;
      transition: transform 0.3s ease;
    }

    .widget:hover {
      transform: translateY(-4px);
    }

    .widget h3 {
      font-size: 1.1rem;
      margin-bottom: 10px;
    }

    .controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 30px;
      flex-wrap: wrap;
      gap: 10px;
    }

    .controls input[type="text"] {
      padding: 8px;
      width: 200px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }

    .controls button {
      padding: 8px 14px;
      background-color: #27ae60;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
      background: white;
      border-radius: 12px;
      overflow: hidden;
    }

    table th, table td {
      padding: 12px;
      border: 1px solid #ddd;
      text-align: left;
    }

    .filters {
      margin-top: 40px;
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
    }

    .filters select {
      padding: 8px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }

    .actions button {
      padding: 6px 12px;
      background-color: #3498db;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    .actions button:hover {
      background-color: #2c80b4;
    }

    .modal {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      display: flex;
      justify-content: center;
      align-items: center;
      display: none;
    }

    .modal-content {
      background: white;
      padding: 20px 30px;
      border-radius: 10px;
      max-width: 400px;
      width: 90%;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }

    .modal-content h3 {
      margin-bottom: 15px;
    }

    .modal-content input {
      width: 100%;
      padding: 8px;
      margin-bottom: 10px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }

    .modal-content button {
      margin-top: 10px;
      padding: 8px 16px;
      background: #171a25;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
  
.sidebar-toggle {
  font-size: 1.2rem;
  margin-right: 20px;
  cursor: pointer;
  display: none;
}

.sidebar ul li:hover {
  background-color: rgba(255, 255, 255, 0.2);
  border-radius: 6px;
  padding-left: 8px;
  transition: all 0.2s ease;
}

.sidebar ul li.active {
  background-color: rgba(255, 255, 255, 0.3);
  border-radius: 6px;
  font-weight: bold;
}

@media (max-width: 768px) {
  .sidebar {
    transform: translateX(-100%);
    transition: transform 0.3s ease;
    position: fixed;
    z-index: 1000;
  }

  .sidebar.show {
    transform: translateX(0);
  }

  .sidebar-toggle {
    display: inline-block;
  }

  .main {
    margin-left: 0;
  }
}

<style>
  body.gradient-blue-purple {
    background: linear-gradient(120deg, #3498db, #9b59b6);
    color: #fff;
  }
  body.gradient-green-teal {
    background: linear-gradient(120deg, #2ecc71, #1abc9c);
    color: #fff;
  }
  body.gradient-orange-red {
    background: linear-gradient(120deg, #e67e22, #e74c3c);
    color: #fff;
  }
  .theme-selector {
    padding: 6px 10px;
    border-radius: 6px;
    background: #fff;
    border: 1px solid #ccc;
    font-size: 0.85rem;
  }
</style>

</style>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Fade-in effect for the body */
        @keyframes fadeIn {
            0% { opacity: 0; }
            100% { opacity: 1; }
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f2f5;
            color: #333;
            animation: fadeIn 1s ease-in-out;
        }

        /* Bounce-in effect for login box */
        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); opacity: 1; }
            100% { transform: scale(1); }
        }

        .auth-box {
            background-color: white;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 400px;
            text-align: center;
            animation: bounceIn 1s ease-out;
        }

        /* Slide-in effect for sidebar */
        @keyframes slideIn {
            0% { transform: translateX(-240px); }
            100% { transform: translateX(0); }
        }

        .sidebar {
            width: 240px;
            height: 100vh;
            background-color: #1940cd;
            color: white;
            position: fixed;
            padding: 20px;
            animation: slideIn 0.5s ease-in-out;
        }

        /* Fade-in effect for widgets */
        @keyframes fadeInWidgets {
            0% { opacity: 0; transform: translateY(20px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        .widgets {
            display: flex;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
            animation: fadeInWidgets 1s ease-in-out;
        }

        .widget {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.06);
            flex: 1 1 200px;
            min-width: 200px;
            transition: transform 0.3s ease;
        }

        .widget:hover {
            transform: translateY(-4px);
        }

        /* Fade-in effect for table */
        @keyframes fadeInTable {
            0% { opacity: 0; transform: translateY(20px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            animation: fadeInTable 1s ease-in-out;
        }

        table th, table td {
            padding: 12px;
            border: 1px solid #ddd;
            text-align: left;
        }

        .sidebar ul li:hover {
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 6px;
            padding-left: 8px;
            transition: all 0.2s ease;
        }
    </style>

<style>
  .add-feature-btn {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background-color: #1940cd;
    color: white;
    padding: 12px 16px;
    border: none;
    border-radius: 50px;
    font-size: 0.95rem;
    cursor: pointer;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    z-index: 1001;
  }

  #addFeatureModal {
    display: none;
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.4);
    justify-content: center;
    align-items: center;
    z-index: 1002;
  }

  #addFeatureModal .modal-content {
    background: white;
    padding: 20px;
    border-radius: 8px;
    width: 90%;
    max-width: 400px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  }

  #addFeatureModal input, #addFeatureModal select {
    width: 100%;
    margin-bottom: 10px;
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 6px;
  }

  #addFeatureModal button {
    padding: 8px 14px;
    background-color: #1940cd;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
  }
</style>


<style>
  .notification-bell {
    position: relative;
    font-size: 1.2rem;
    cursor: pointer;
    margin-right: 20px;
  }

  .notification-badge {
    position: absolute;
    top: -8px;
    right: -10px;
    background-color: red;
    color: white;
    font-size: 0.7rem;
    border-radius: 50%;
    padding: 2px 6px;
  }

  .notification-panel {
    position: absolute;
    right: 20px;
    top: 50px;
    background: white;
    color: #333;
    border-radius: 8px;
    width: 250px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    display: none;
    z-index: 1003;
  }

  .notification-panel ul {
    list-style: none;
    padding: 10px;
  }

  .notification-panel ul li {
    padding: 6px 0;
    border-bottom: 1px solid #eee;
    font-size: 0.9rem;
  }

  .profile-dropdown {
    position: relative;
    display: inline-block;
  }

  .profile-menu {
    display: none;
    position: absolute;
    right: 0;
    background: white;
    color: #333;
    border-radius: 8px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    min-width: 160px;
    z-index: 1003;
  }

  .profile-menu a {
    padding: 10px 15px;
    display: block;
    font-size: 0.9rem;
    border-bottom: 1px solid #eee;
  }

  .profile-menu a:hover {
    background-color: #f0f0f0;
  }

  .topbar-right {
    display: flex;
    align-items: center;
    gap: 20px;
  }
</style>


<style>
  .clock {
    font-size: 0.95rem;
    margin-right: 20px;
    align-self: center;
  }
  .visit-counter {
    font-size: 0.95rem;
    margin-right: 20px;
    align-self: center;
  }
</style>

</head>

<body>
<div class="sidebar">
<h5>Eshsoft School</h5>
<h2>School Admin</h2>
<ul id="sidebar-menu">
<li><i class="fas fa-home"></i> Dashboard</li>
<li><i class="fas fa-user-graduate"></i> Students</li>
<li><i class="fas fa-chalkboard-teacher"></i> Teachers</li>
<li><i class="fas fa-book"></i> Academics</li>
<li><i class="fas fa-calendar-check"></i> Attendance</li>
<li><i class="fas fa-money-bill-wave"></i> Finance</li>
<li><i class="fas fa-envelope"></i> Communication</li>
<li><i class="fas fa-chart-line"></i> Reports</li>
<li><i class="fas fa-book-reader"></i> Library</li>
<li><i class="fab fa-whatsapp"></i> WhatsApp</li>
<li><i class="fas fa-bell"></i> Notifications</li>
<li><i class="fas fa-cog"></i> Settings</li>
<li><i class="fas fa-map-marker-alt"></i> Tracking</li>
<li><i class="fas fa-door-open"></i> Classroom</li>
</ul>
</div>
<div class="main">
<div class="topbar">
<span><span class="sidebar-toggle" onclick="toggleSidebar()">☰</span><strong>Term:</strong> 2nd Term | <strong>Session:</strong> 2024/2025</span>
<span>
        
<!-- Notification Bell -->
<div class="notification-bell" onclick="toggleNotifications()">
  <i class="fas fa-bell"></i>
  <span class="notification-badge" id="notifCount">3</span>
</div>
<div class="notification-panel" id="notifPanel">
  <ul>
    <li>New student registered</li>
    <li>Fee reminder sent</li>
    <li>Teacher requested leave</li>
  </ul>
</div>

<!-- Profile Dropdown -->
<div class="profile-dropdown">
  <span onclick="toggleProfileMenu()">User: Admin ▾</span>
  <div class="profile-menu" id="profileMenu">
    <a href="#">View Profile</a>
    <a href="#">Change Password</a>
    <a href="#">Logout</a>
  </div>
</div>

        
<!-- Clock and Visit Counter -->
<span id="clock" class="clock"></span>
<span class="visit-counter">
  Visits: <span id="visitCount">0</span>
  <button onclick="refreshVisits()" style="margin-left: 10px; padding: 3px 8px; font-size: 0.8rem;">↻</button>
</span>

    
<select id="themePicker" class="theme-selector">
  <option value="">Default Theme</option>
  <option value="gradient-blue-purple">Blue → Purple</option>
  <option value="gradient-green-teal">Green → Teal</option>
  <option value="gradient-orange-red">Orange → Red</option>
</select>

<span class="dark-toggle" onclick="toggleDarkMode()">Toggle Dark Mode</span>
</span>
</div>

<div class="controls" style="margin-top: 10px;">
  <button onclick="toggleSection('studentTable')">Toggle Students Table</button>
  <button onclick="toggleSection('widgets')">Toggle Charts</button>
  <button onclick="toggleSection('calendarGrid', true)">Toggle Calendar</button>
</div>

<div class="widgets">
<div class="widget">
<h3>Total Students</h3>
<p>320</p>
</div>
<div class="widget">
<h3>Total Staff</h3>
<p>25</p>
</div>
<div class="widget">
<h3>Fees Collected</h3>
<p>GHS 12,000</p>
</div>
<div class="widget">
<h3>Outstanding Fees</h3>
<p>GHS 3,000</p>
</div>
<div class="widget">
<h3>Gender Distribution</h3>
<canvas height="200" id="genderChart" width="200"></canvas>
</div>
<div class="widget">
<h3>Fees Trend</h3>
<canvas height="200" id="feesChart" width="200"></canvas>
</div>
<div class="widget">
<h3>Students Per Class</h3>
<canvas height="200" id="classChart" width="200"></canvas>
</div>

<div class="widget">
  <h3>Top Performing Classes</h3>
  <canvas id="topClassesChart" height="200"></canvas>
</div>
<div class="widget">
  <h3>Events This Week</h3>
  <ul>
    <li>Mon - PTA Meeting</li>
    <li>Wed - Mid-Term Exams</li>
    <li>Fri - Cultural Day</li>
  </ul>
</div>


<div class="widget">
  <h3>Recent Activities</h3>
  <ul style="list-style: none; padding-left: 0;">
    <li>✅ New student registered - 10:32 AM</li>
    <li>💬 Parent message received - 10:15 AM</li>
    <li>📥 Report uploaded - 9:50 AM</li>
    <li>🕒 Attendance marked - 9:30 AM</li>
    <li>💸 Payment confirmed - 8:45 AM</li>
  </ul>
</div>


<div class="widget">
  <div class="widget">
  <h3>School Calendar</h3>
  <div id="calendar-controls" style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
    <button onclick="changeMonth(-1)" style="padding:4px 8px;">◀</button>
    <strong id="calendarMonth"></strong>
    <button onclick="changeMonth(1)" style="padding:4px 8px;">▶</button>
  </div>
  <div id="calendarGrid" style="display:grid; grid-template-columns:repeat(7,1fr); gap:6px; font-size:0.85rem; text-align:center;"></div>
  

<div style="margin-top: 20px;">
  <input type="file" id="eventFileInput" accept=".xlsx, .csv" />
  <button onclick="importEventsFromExcel()">Import Events</button>
</div>

<div style="margin-top: 20px; display:flex; gap:10px; flex-wrap:wrap;">
  <button onclick="exportEventsToWord()">Export to Word</button>
  <button onclick="exportEventsToExcel()">Export to Excel</button>
  <button onclick="exportEventsToPDF()">Export to PDF</button>
</div>

<p style="margin-top: 10px; font-size: 0.75rem;">📅 Event Days: <span style="color:#1940cd;">5th</span> PTA, <span style="color:#27ae60;">11th</span> Exams</p>
</div>
  <div style="display: grid; grid-template-columns: repeat(7, 1fr); gap: 6px; font-size: 0.85rem; text-align: center;">
    <div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>
    <div></div><div>1</div><div>2</div><div>3</div><div>4</div><div style="background:#1940cd;color:white;border-radius:6px;">5</div><div>6</div>
    <div>7</div><div>8</div><div>9</div><div>10</div><div style="background:#27ae60;color:white;border-radius:6px;">11</div><div>12</div><div>13</div>
    <div>14</div><div>15</div><div>16</div><div>17</div><div>18</div><div>19</div><div>20</div>
    <div>21</div><div>22</div><div>23</div><div>24</div><div>25</div><div>26</div><div>27</div>
    <div>28</div><div>29</div><div>30</div><div>31</div><div></div><div></div><div></div>
  </div>
  <p style="margin-top: 10px; font-size: 0.75rem;">📅 Highlighted: PTA (5th), Exams (11th)</p>
</div>

</div>
<div class="controls">
<input id="searchInput" placeholder="Search students..." type="text"/>
<button onclick="downloadCSV()">Export to CSV</button>
</div>
<div class="filters">
<div>
<label for="classFilter">Filter by Class:</label>
<select id="classFilter">
<option>All</option>
<option>Creche</option>
<option>Nursery</option>
<option>KG 1</option>
<option>KG 2</option>
<option>Basic 1</option>
<option>Basic 2</option>
<option>Basic 3</option>
<option>Basic 4</option>
<option>Basic 5</option>
<option>Basic 6</option>
<option>JHS 1</option>
<option>JHS 2</option>
<option>JHS 3</option>
</select>
</div>
<div>
<label for="genderFilter">Filter by Gender:</label>
<select id="genderFilter">
<option>All</option>
<option>Male</option>
<option>Female</option>
</select>
</div>
</div>
<table id="studentTable">
<thead>
<tr>
<th>#</th>
<th>Full Name</th>
<th>Class</th>
<th>Gender</th>
<th>Parent Contact</th>
<th>Actions</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Odersum Charity</td>
<td>Primary 4</td>
<td>Female</td>
<td>0240000000</td>
<td class="actions"><button class="view-btn">View</button></td>
</tr>
<tr>
<td>2</td>
<td>Agbana Clifford</td>
<td>JHS 1</td>
<td>Male</td>
<td>0541000000</td>
<td class="actions"><button class="view-btn">View</button></td>
</tr>
</tbody>
</table>
</div>
<div class="modal" id="studentModal">
<div class="modal-content">
<h3 id="modalStudentName">Student Profile</h3>
<div style="text-align:center; margin-bottom:15px;">
<img alt="Student Photo" id="studentPhoto" src="https://via.placeholder.com/100" style="border-radius:50%; border:2px solid #ccc;"/>
</div>
<input disabled="" id="modalStudentClass" placeholder="Class" type="text"/>
<input disabled="" id="modalStudentGender" placeholder="Gender" type="text"/>
<input disabled="" id="modalStudentContact" placeholder="Parent Contact" type="text"/>
<input disabled="" id="modalStudentDOB" placeholder="Date of Birth" type="text"/>
<input disabled="" id="modalStudentAddress" placeholder="Address" type="text"/>
<div style="display:flex; justify-content:space-between; margin-top:15px;">
<button onclick="enableEdit()">Edit</button>
<button onclick="saveProfile()">Save</button>
<button onclick="closeModal()">Close</button>
</div>
</div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', () => {
      document.querySelectorAll('.view-btn').forEach(button => {
        button.addEventListener('click', (e) => {
          const row = e.target.closest('tr');
          document.getElementById('modalStudentName').textContent = row.children[1].textContent;
          document.getElementById('modalStudentClass').value = row.children[2].textContent;
          document.getElementById('modalStudentGender').value = row.children[3].textContent;
          document.getElementById('modalStudentContact').value = row.children[4].textContent;
          document.getElementById('studentModal').style.display = 'flex';
        });
      });

      document.getElementById('searchInput').addEventListener('input', function () {
        const searchVal = this.value.toLowerCase();
        document.querySelectorAll('#studentTable tbody tr').forEach(row => {
          const name = row.children[1].textContent.toLowerCase();
          row.style.display = name.includes(searchVal) ? '' : 'none';
        });
      });

      document.getElementById('classFilter').addEventListener('change', filterTable);
      document.getElementById('genderFilter').addEventListener('change', filterTable);
    });

    function closeModal() {
      document.getElementById('studentModal').style.display = 'none';
    }

    function toggleDarkMode() {
      document.body.classList.toggle('dark-mode');
    }

    function filterTable() {
      const classVal = document.getElementById('classFilter').value;
      const genderVal = document.getElementById('genderFilter').value;
      document.querySelectorAll('#studentTable tbody tr').forEach(row => {
        const studentClass = row.children[2].textContent;
        const gender = row.children[3].textContent;
        const matchClass = classVal === "All" || studentClass === classVal;
        const matchGender = genderVal === "All" || gender === genderVal;
        row.style.display = (matchClass && matchGender) ? '' : 'none';
      });
    }

    function downloadCSV() {
      let csv = "# ,Full Name,Class,Gender,Parent Contact\n";
      document.querySelectorAll('#studentTable tbody tr').forEach(row => {
        if (row.style.display !== 'none') {
          const cells = Array.from(row.children).slice(0, 5).map(td => td.textContent);
          csv += cells.join(',') + "\n";
        }
      });
      const blob = new Blob([csv], { type: 'text/csv' });
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = 'students.csv';
      link.click();
    }
  
function toggleSidebar() {
  document.querySelector('.sidebar').classList.toggle('show');
}

document.querySelectorAll('#sidebar-menu li').forEach(item => {
  item.addEventListener('click', () => {
    document.querySelectorAll('#sidebar-menu li').forEach(el => el.classList.remove('active'));
    item.classList.add('active');
  });
});

function toggleDarkMode() {
  const body = document.body;
  const isDark = body.classList.toggle('dark-mode');
  localStorage.setItem('darkMode', isDark ? 'enabled' : 'disabled');
}

document.addEventListener('DOMContentLoaded', () => {
  if (localStorage.getItem('darkMode') === 'enabled') {
    document.body.classList.add('dark-mode');
  }
});

// Gradient Theme Picker
document.getElementById('themePicker').addEventListener('change', function () {
  const body = document.body;
  body.className = body.className.replace(/\bgradient-\S+/g, '').trim(); // Remove existing gradient class
  const selected = this.value;
  if (selected) body.classList.add(selected);
  localStorage.setItem('selectedTheme', selected);
});

document.addEventListener('DOMContentLoaded', () => {
  const savedTheme = localStorage.getItem('selectedTheme');
  if (savedTheme) document.body.classList.add(savedTheme);
});

// Top Performing Classes Chart
new Chart(document.getElementById('topClassesChart'), {
  type: 'bar',
  data: {
    labels: ['Basic 1', 'Basic 2', 'Basic 3', 'JHS 1', 'JHS 2'],
    datasets: [{
      label: 'Average Scores',
      data: [75, 80, 78, 85, 82],
      backgroundColor: '#f39c12'
    }]
  },
  options: {
    scales: {
      y: {
        beginAtZero: true
      }
    }
  }
});

</script>
<script>
const genderCtx = document.getElementById('genderChart');
new Chart(genderCtx, {
  type: 'pie',
  data: {
    labels: ['Male', 'Female'],
    datasets: [{
      label: 'Gender',
      data: [160, 160],
      backgroundColor: ['#3498db', '#e74c3c'],
      borderWidth: 1
    }]
  }
});

const feesCtx = document.getElementById('feesChart');
new Chart(feesCtx, {
  type: 'line',
  data: {
    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May'],
    datasets: [{
      label: 'Fees Collected',
      data: [2000, 3000, 2500, 1500, 3000],
      fill: false,
      borderColor: '#27ae60',
      tension: 0.1
    }]
  }
});

const classCtx = document.getElementById('classChart');
new Chart(classCtx, {
  type: 'bar',
  data: {
    labels: ['KG 1', 'KG 2', 'Basic 1', 'Basic 2', 'Basic 3', 'JHS 1', 'JHS 2', 'JHS 3'],
    datasets: [{
      label: 'Students',
      data: [30, 28, 45, 42, 38, 37, 35, 32],
      backgroundColor: '#8e44ad'
    }]
  },
  options: {
    scales: {
      y: {
        beginAtZero: true
      }
    }
  }
});
</script><script>
function enableEdit() {
  document.querySelectorAll('#studentModal input').forEach(input => input.removeAttribute('disabled'));
}

function saveProfile() {
  const name = document.getElementById('modalStudentName').textContent;
  const updatedData = {
    class: document.getElementById('modalStudentClass').value,
    gender: document.getElementById('modalStudentGender').value,
    contact: document.getElementById('modalStudentContact').value,
    dob: document.getElementById('modalStudentDOB').value,
    address: document.getElementById('modalStudentAddress').value
  };
  alert('Profile for ' + name + ' saved!'); // Simulate save
  document.querySelectorAll('#studentModal input').forEach(input => input.setAttribute('disabled', true));
}

function enableEdit() {
  document.querySelectorAll('#studentModal input').forEach(input => input.removeAttribute('disabled'));
}

function saveProfile() {
  const name = document.getElementById('modalStudentName').textContent.trim();
  const updatedData = {
    class: document.getElementById('modalStudentClass').value,
    gender: document.getElementById('modalStudentGender').value,
    contact: document.getElementById('modalStudentContact').value,
    dob: document.getElementById('modalStudentDOB').value,
    address: document.getElementById('modalStudentAddress').value
  };
  localStorage.setItem('studentProfile_' + name, JSON.stringify(updatedData));
  alert('Profile for ' + name + ' saved!');
  document.querySelectorAll('#studentModal input').forEach(input => input.setAttribute('disabled', true));
}

function loadProfile(name) {
  const stored = localStorage.getItem('studentProfile_' + name);
  if (stored) {
    const data = JSON.parse(stored);
    document.getElementById('modalStudentClass').value = data.class || '';
    document.getElementById('modalStudentGender').value = data.gender || '';
    document.getElementById('modalStudentContact').value = data.contact || '';
    document.getElementById('modalStudentDOB').value = data.dob || '';
    document.getElementById('modalStudentAddress').value = data.address || '';
  }
}

document.addEventListener('DOMContentLoaded', () => {
  document.querySelectorAll('.view-btn').forEach(button => {
    button.addEventListener('click', (e) => {
      const row = e.target.closest('tr');
      const name = row.children[1].textContent;
      document.getElementById('modalStudentName').textContent = name;
      loadProfile(name);
      document.getElementById('studentModal').style.display = 'flex';
    });
  });
});

</script>
<!-- Add Feature Button -->
<button class="add-feature-btn" onclick="openAddFeatureModal()">+ Add Feature</button>

<!-- Add Feature Modal -->
<div id="addFeatureModal">
  <div class="modal-content">
    <h3>Add New Feature</h3>
    <input type="text" id="featureName" placeholder="Feature Name"/>
    <input type="text" id="featureIcon" placeholder="Icon Class (e.g., fa-bus)"/>
    <select id="featureSection">
      <option value="sidebar">Sidebar</option>
      <option value="topbar">Topbar</option>
      <option value="dashboard">Dashboard</option>
    </select>
    <div style="text-align:right; margin-top: 10px;">
      <button onclick="addFeature()">Add</button>
      <button onclick="closeAddFeatureModal()" style="background:#ccc; color:#333; margin-left: 8px;">Cancel</button>
    
<div id="eventList" style="margin-top:10px;"></div>
</div>
  </div>
</div>


<script>
  function openAddFeatureModal() {
    document.getElementById('addFeatureModal').style.display = 'flex';
  }

  function closeAddFeatureModal() {
    document.getElementById('addFeatureModal').style.display = 'none';
  }

  function addFeature() {
    const name = document.getElementById('featureName').value;
    const icon = document.getElementById('featureIcon').value;
    const section = document.getElementById('featureSection').value;
    console.log(`Adding ${name} to ${section} with icon ${icon}`);

    if (section === 'sidebar') {
      const li = document.createElement('li');
      li.innerHTML = `<i class="fas ${icon}"></i> ${name}`;
      document.getElementById('sidebar-menu').appendChild(li);
    }

    closeAddFeatureModal();
  }
</script>


<script>
  function toggleNotifications() {
    const panel = document.getElementById('notifPanel');
    panel.style.display = panel.style.display === 'block' ? 'none' : 'block';
  }

  function toggleProfileMenu() {
    const menu = document.getElementById('profileMenu');
    menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
  }

  // Close dropdowns when clicking outside
  document.addEventListener('click', function(event) {
    const notifPanel = document.getElementById('notifPanel');
    const profileMenu = document.getElementById('profileMenu');
    if (!event.target.closest('.notification-bell')) notifPanel.style.display = 'none';
    if (!event.target.closest('.profile-dropdown')) profileMenu.style.display = 'none';
  });
</script>


<script>
document.addEventListener('DOMContentLoaded', function() {
  // Visit counter using localStorage
  let visits = localStorage.getItem('visitCount') || 0;
  visits = parseInt(visits) + 1;
  localStorage.setItem('visitCount', visits);
  document.getElementById('visitCount').textContent = visits;

  // Live clock
  function updateClock() {
    const now = new Date();
    const timeString = now.toLocaleTimeString();
    document.getElementById('clock').textContent = timeString;
  }
  updateClock();
  setInterval(updateClock, 1000);
});

function refreshVisits() {
  localStorage.setItem('visitCount', 0);
  document.getElementById('visitCount').textContent = 0;
}

</script>


<style>
  .calendar-day {
    padding: 8px 4px;
    border-radius: 6px;
    cursor: pointer;
    transition: background 0.3s;
  }
  .calendar-day:hover {
    background: rgba(0,0,0,0.05);
  }
  .calendar-today {
    border: 2px solid #1940cd;
    font-weight: bold;
  }
  .calendar-event-pt {
    background-color: #1940cd;
    color: white;
  }
  .calendar-event-exam {
    background-color: #27ae60;
    color: white;
  }
</style>
<script>
  const calendarGrid = document.getElementById('calendarGrid');
  const calendarMonth = document.getElementById('calendarMonth');
  let currentDate = new Date();

  const eventDates = {
    5: 'pt',
    11: 'exam'
  };

  function generateCalendar(date) {
    const year = date.getFullYear();
    const month = date.getMonth();
    const firstDay = new Date(year, month, 1).getDay();
    const daysInMonth = new Date(year, month + 1, 0).getDate();
    const today = new Date();

    calendarGrid.innerHTML = '';
    calendarMonth.textContent = date.toLocaleString('default', { month: 'long', year: 'numeric' });

    const weekDays = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];
    weekDays.forEach(d => {
      const day = document.createElement('div');
      day.innerHTML = `<strong>${d}</strong>`;
      calendarGrid.appendChild(day);
    });

    for (let i = 0; i < firstDay; i++) {
      calendarGrid.appendChild(document.createElement('div'));
    }

    for (let day = 1; day <= daysInMonth; day++) {
      const cell = document.createElement('div');
      cell.textContent = day;
      cell.className = 'calendar-day';

      if (day === today.getDate() && month === today.getMonth() && year === today.getFullYear()) {
        cell.classList.add('calendar-today');
      }

      if (eventDates[day]) {
        cell.classList.add('calendar-event-' + eventDates[day]);
      }

      calendarGrid.appendChild(cell);
    }
  }

  function changeMonth(offset) {
    currentDate.setMonth(currentDate.getMonth() + offset);
    generateCalendar(currentDate);
  }

  document.addEventListener('DOMContentLoaded', () => generateCalendar(currentDate));
</script>


<script>
  function toggleSection(id, useParent=false) {
    const el = document.getElementById(id);
    const target = useParent ? el?.closest('.widget') : el;
    if (target) {
      target.style.display = target.style.display === 'none' ? '' : 'none';
    }
  }
</script>

<div id="toast" class="toast"></div>

<style>
  .widget, .controls, #studentTable {
    transition: all 0.3s ease;
  }

  button:active {
    transform: scale(0.97);
  }

  .toast {
    position: fixed;
    top: 20px;
    right: 20px;
    background: #1940cd;
    color: white;
    padding: 10px 16px;
    border-radius: 6px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.4s ease;
    z-index: 9999;
  }

  .toast.show {
    opacity: 1;
    pointer-events: auto;
  }

  .widget:hover {
    box-shadow: 0 6px 14px rgba(0, 0, 0, 0.1);
  }

  tr:hover {
    background-color: #f9f9f9;
  }
</style>


<script>
  function showToast(msg) {
    let toast = document.getElementById('toast');
    if (!toast) {
      toast = document.createElement('div');
      toast.id = 'toast';
      toast.className = 'toast';
      document.body.appendChild(toast);
    }
    toast.textContent = msg;
    toast.classList.add('show');
    setTimeout(() => toast.classList.remove('show'), 3000);
  }

  function toggleSection(id, useParent=false) {
    const el = document.getElementById(id);
    const target = useParent ? el?.closest('.widget') : el;
    if (target) {
      const currentState = target.style.display === 'none' ? '' : 'none';
      target.style.display = currentState;
      localStorage.setItem('toggle_' + id, currentState);
      showToast((currentState === 'none' ? 'Hid' : 'Showed') + ' section: ' + id);
    }
  }

  document.addEventListener('DOMContentLoaded', () => {
    ['studentTable', 'widgets', 'calendarGrid'].forEach(id => {
      const savedState = localStorage.getItem('toggle_' + id);
      if (savedState !== null) {
        const el = document.getElementById(id);
        const target = id === 'calendarGrid' ? el?.closest('.widget') : el;
        if (target) target.style.display = savedState;
      }
    });
  });
</script>


<div id="eventModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); justify-content:center; align-items:center; z-index:10000;">
  <div style="background:white; padding:20px; border-radius:10px; width:300px;">
    <h4>Add Event</h4>
    <input type="text" id="eventTitle" placeholder="Event Title" style="width:100%; padding:8px; margin-bottom:10px;"/>
    <select id="eventType" style="width:100%; padding:8px; margin-bottom:10px;">
      <option value="pt">PTA</option>
      <option value="exam">Exam</option>
      <option value="birthday">Birthday</option>
    </select>
    <input type="date" id="eventDate" style="width:100%; padding:8px; margin-bottom:10px;" />
    <div style="text-align:right;">
      <button onclick="saveEvent()">Save</button>
      <button onclick="closeEventModal()" style="margin-left:10px;">Cancel</button>
    
<div id="eventList" style="margin-top:10px;"></div>
</div>
  </div>
</div>


<script>
  const calendarGrid = document.getElementById('calendarGrid');
  const calendarMonth = document.getElementById('calendarMonth');
  let currentDate = new Date();

  const eventColors = {
    pt: '#1940cd',
    exam: '#27ae60',
    birthday: '#8e44ad'
  };

  function getStoredEvents(key) {
    return JSON.parse(localStorage.getItem(key)) || [];
  }

  function generateCalendar(date) {
    const year = date.getFullYear();
    const month = date.getMonth();
    const firstDay = new Date(year, month, 1).getDay();
    const daysInMonth = new Date(year, month + 1, 0).getDate();
    const today = new Date();

    calendarGrid.innerHTML = '';
    calendarMonth.textContent = date.toLocaleString('default', { month: 'long', year: 'numeric' });

    const weekDays = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];
    weekDays.forEach(d => {
      const day = document.createElement('div');
      day.innerHTML = `<strong>${d}</strong>`;
      calendarGrid.appendChild(day);
    });

    for (let i = 0; i < firstDay; i++) {
      calendarGrid.appendChild(document.createElement('div'));
    }

    for (let day = 1; day <= daysInMonth; day++) {
      const fullDate = `${year}-${String(month+1).padStart(2,'0')}-${String(day).padStart(2,'0')}`;
      const events = getStoredEvents(fullDate);

      const cell = document.createElement('div');
      cell.className = 'calendar-day';
      cell.textContent = day;
      cell.setAttribute('title', events.map(e => e.title).join(', '));
      if (day === today.getDate() && month === today.getMonth() && year === today.getFullYear()) {
        cell.classList.add('calendar-today');
      }
      if (events.length > 0) {
        const badge = document.createElement('div');
        badge.style.marginTop = '6px';
        events.forEach(evt => {
          const ev = document.createElement('div');
          ev.style.backgroundColor = eventColors[evt.type];
          ev.style.height = '6px';
          ev.style.margin = '2px auto';
          ev.style.width = '60%';
          ev.style.borderRadius = '3px';
          badge.appendChild(ev);
        });
        cell.appendChild(badge);
      }
      cell.onclick = () => openEventModal();
      calendarGrid.appendChild(cell);
    }
  }

  function changeMonth(offset) {
    currentDate.setMonth(currentDate.getMonth() + offset);
    generateCalendar(currentDate);
  }

  function openEventModal() {
    document.getElementById('eventModal').style.display = 'flex';
    document.getElementById('eventDate').value = new Date().toISOString().split('T')[0];
    document.getElementById('eventTitle').value = '';
    document.getElementById('eventType').value = 'pt';
  }

  function closeEventModal() {
    document.getElementById('eventModal').style.display = 'none';
  }

  function saveEvent() {
    const title = document.getElementById('eventTitle').value.trim();
    const type = document.getElementById('eventType').value;
    const date = document.getElementById('eventDate').value;
    if (title && date) {
      const existing = getStoredEvents(date);
      existing.push({ title, type });
      localStorage.setItem(date, JSON.stringify(existing));
      closeEventModal();
      generateCalendar(currentDate);
      showToast('Event saved!');
    }
  }

  document.addEventListener('DOMContentLoaded', () => generateCalendar(currentDate));
</script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
  function getAllEvents() {
    const events = [];
    for (let key in localStorage) {
      if (/^\d{4}-\d{2}-\d{2}$/.test(key)) {
        const dayEvents = JSON.parse(localStorage.getItem(key));
        if (Array.isArray(dayEvents)) {
          dayEvents.forEach(e => events.push({ date: key, ...e }));
        }
      }
    }
    return events;
  }

  function exportEventsToExcel() {
    const events = getAllEvents();
    const ws = XLSX.utils.json_to_sheet(events);
    const wb = XLSX.utils.book_new();
    XLSX.utils.book_append_sheet(wb, ws, "Events");
    XLSX.writeFile(wb, "school_events.xlsx");
  }

  function exportEventsToPDF() {
    const events = getAllEvents();
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    doc.setFontSize(12);
    doc.text("School Events", 10, 10);
    let y = 20;
    events.forEach((e, i) => {
      doc.text(`${i+1}. ${e.date} - ${e.title} (${e.type})`, 10, y);
      y += 10;
    });
    doc.save("school_events.pdf");
  }

  function exportEventsToWord() {
    const events = getAllEvents();
    let content = "School Events\n\n";
    events.forEach((e, i) => {
      content += `${i+1}. ${e.date} - ${e.title} (${e.type})\n`;
    });
    const blob = new Blob([content], { type: "application/msword" });
    saveAs(blob, "school_events.doc");
  }
</script>


<script>
  function importEventsFromExcel() {
    const fileInput = document.getElementById('eventFileInput');
    const file = fileInput.files[0];
    if (!file) {
      alert("Please select a file to import.");
      return;
    }
    const reader = new FileReader();
    reader.onload = function (e) {
      const data = new Uint8Array(e.target.result);
      const workbook = XLSX.read(data, { type: "array" });
      const sheetName = workbook.SheetNames[0];
      const sheet = workbook.Sheets[sheetName];
      const events = XLSX.utils.sheet_to_json(sheet);

      events.forEach(event => {
        const { date, title, type } = event;
        if (!date || !title || !type) return;
        const existing = JSON.parse(localStorage.getItem(date)) || [];
        existing.push({ title, type });
        localStorage.setItem(date, JSON.stringify(existing));
      });

      generateCalendar(currentDate);
      showToast("Events imported successfully!");
    };
    reader.readAsArrayBuffer(file);
  }
</script>


<script>
  function openEventModal(date = null) {
    document.getElementById('eventModal').style.display = 'flex';
    document.getElementById('eventDate').value = date || new Date().toISOString().split('T')[0];
    document.getElementById('eventTitle').value = '';
    document.getElementById('eventType').value = 'pt';
    renderEventList(document.getElementById('eventDate').value);
  }

  function renderEventList(date) {
    const container = document.getElementById('eventList');
    container.innerHTML = '';
    const events = getStoredEvents(date);
    if (events.length === 0) {
      container.innerHTML = '<small>No events for this date.</small>';
      return;
    }
    events.forEach((e, i) => {
      const div = document.createElement('div');
      div.style.marginBottom = '6px';
      div.innerHTML = \`
        <input type="text" value="\${e.title}" onchange="updateEvent('\${date}', \${i}, 'title', this.value)" style="width:60%; padding:4px;" />
        <select onchange="updateEvent('\${date}', \${i}, 'type', this.value)" style="padding:4px;">
          <option value="pt" \${e.type==='pt'?'selected':''}>PTA</option>
          <option value="exam" \${e.type==='exam'?'selected':''}>Exam</option>
          <option value="birthday" \${e.type==='birthday'?'selected':''}>Birthday</option>
        </select>
        <button onclick="deleteEvent('\${date}', \${i})" style="padding:2px 6px; margin-left:4px; background:#e74c3c; color:white;">Delete</button>
      \`;
      container.appendChild(div);
    });
  }

  function updateEvent(date, index, field, value) {
    const events = getStoredEvents(date);
    events[index][field] = value;
    localStorage.setItem(date, JSON.stringify(events));
    showToast('Event updated');
    generateCalendar(currentDate);
  }

  function deleteEvent(date, index) {
    const events = getStoredEvents(date);
    events.splice(index, 1);
    localStorage.setItem(date, JSON.stringify(events));
    renderEventList(date);
    generateCalendar(currentDate);
    showToast('Event deleted');
  }
</script>

</body>
</html>
